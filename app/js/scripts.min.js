// first carousel

$(document).ready(function() {
  $(".first-carousel").owlCarousel({
    loop: true,
    margin: 30,
    items: 3,
    dots: true,
    nav: true,
    autoplay: true,
    autoplayHoverPause: true,
    slideBy: 3,
    responsiveClass: true,
    responsive: {
      0: {
        items: 1,
        nav: true
      },
      600: {
        items: 2,
        nav: true
      },
      988: {
        item: 3,
        nav: true
      }
    }
  });

  window.onresize = function() {
    var mh = 0;
    $(".div").each(function() {
      var h_block = $(this).height();
      if (h_block > mh) {
        mh = h_block;
      };
    });
    $(".div").height(mh).css('margin-bottom', '24px');
  }



  //   second carousel

  $("#second-carousel").owlCarousel({
    loop: true,
    margin: 30,
    items: 1,
    autoplayHoverPause: true,
    responsive: {
      0: {
        items: 1,
        nav: true,
      }
    },
    dots: true,
    autoplay: true
  });

  //   third carousel

  $("#third-carousel").owlCarousel({
    loop: true,
    nav: true,
    items: 4,
    slideBy: 4,
    autoplay: true,
    autoplayTimeout: 5000,
    autoplayHoverPause: true,
    dots: true,
    responsiveClass: true,
    responsive: {
      0: {
        items: 1,
        nav: true
      },
      600: {
        items: 2,
        nav: true
      },
      988: {
        item: 3,
        nav: true
      }
    }
  });
});


// navigation
$(".menu, .logo-block").on("click", "a", function(event) {
  $('.menu-item:first').addClass('active');
  $(".main-navigation .nav-block .menu .menu-item").removeClass('active');
  $(this).closest('.menu-item').addClass('active');
  event.preventDefault();
  var id = $(this).attr('href'),
    top = $(id).offset().top;
  $('body,html').animate({
    scrollTop: top - 80
  }, 1500);
});


$(".logo-block").on("click", "a", function(event) {
  $('.nav-block .menu .menu-item:first').addClass('active');
});


$('.modal-backdrop').click(function() {
  $('.modal').removeClass('show');
  $('.modal-backdrop').remove();
});

$(window).scroll(function() {
  var content = $('header .content');
  var logo = $('header .main-navigation .logo-block');
  var nav = $('header .main-navigation .nav-block .menu .menu-item a');
  var btn = $('header .main-navigation .btn.btn-backorder');
  if ($(this).width() > 988) {
    if ($(this).scrollTop() > 200) {
      [logo, nav, btn, content].forEach(function(v) {
        $(v).addClass('animate')
      });
    } else {
      [logo, nav, btn, content].forEach(function(v) {
        $(v).removeClass('animate')
      });
    }
  }
});


$('.menu-btn, .menu-item a').click(function() {
  $('.menu-btn').toggleClass('change');
  $('.menu-wrapper .menu').toggleClass('active');
});



function initMap() {
  // Map options
  var options = {
    center: {
      lat: 46.48272,
      lng: 30.73560
    },
    zoom: 17,
    styles: [{
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#dcdcdc"
      }]
    }, {
      "featureType": "administrative",
      "stylers": [{
        "saturation": "-100"
      }]
    }, {
      "featureType": "administrative.province",
      "stylers": [{
        "visibility": "off"
      }]
    }, {
      "featureType": "landscape",
      "stylers": [{
        "saturation": -100
      }, {
        "lightness": 65
      }, {
        "visibility": "on"
      }]
    }, {
      "featureType": "poi",
      "stylers": [{
        "saturation": -100
      }, {
        "lightness": "50"
      }, {
        "visibility": "simplified"
      }]
    }, {
      "featureType": "poi.business",
      "stylers": [{
        "visibility": "off"
      }]
    }, {
      "featureType": "poi.park",
      "elementType": "labels.text",
      "stylers": [{
        "visibility": "off"
      }]
    }, {
      "featureType": "road",
      "stylers": [{
        "saturation": "-100"
      }]
    }, {
      "featureType": "road",
      "elementType": "labels.icon",
      "stylers": [{
        "visibility": "off"
      }]
    }, {
      "featureType": "road.arterial",
      "stylers": [{
        "color": "#f0f0f0"
      }, {
        "lightness": 30
      }]
    }, {
      "featureType": "road.arterial",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#dcdcdc"
      }]
    }, {
      "featureType": "road.arterial",
      "elementType": "labels.text.fill",
      "stylers": [{
        "color": "#aaaaaa"
      }]
    }, {
      "featureType": "road.highway",
      "stylers": [{
        "visibility": "simplified"
      }]
    }, {
      "featureType": "road.highway",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#c8c8c8"
      }]
    }, {
      "featureType": "road.local",
      "stylers": [{
        "lightness": "40"
      }]
    }, {
      "featureType": "road.local",
      "elementType": "geometry.fill",
      "stylers": [{
        "color": "#dcdcdc"
      }]
    }, {
      "featureType": "transit",
      "stylers": [{
        "saturation": -100
      }]
    }, {
      "featureType": "water",
      "elementType": "geometry",
      "stylers": [{
        "color": "#e6e6e6"
      }, {
        "hue": "#ffff00"
      }, {
        "saturation": -95
      }, {
        "lightness": -25
      }]
    }, {
      "featureType": "water",
      "elementType": "labels",
      "stylers": [{
        "saturation": -100
      }, {
        "lightness": -25
      }]
    }]

  }

  // New map
  var map = new google.maps.Map(document.getElementById('map'), options);

  // Listen for click on map
  google.maps.event.addListener(map, 'click', function(event) {
    // Add marker
    addMarker({
      coords: event.latLng
    });
  });
  var marker = new google.maps.Marker({
    position: {
      lat: 46.48272,
      lng: 30.73560
    },
    map: map,
    icon: 'img/map-marker.png',
  });

  var infoWindow = new google.maps.InfoWindow({
    content: '<div class="marker-h"><h4>Одесса</h4><p> ТЦ Афина, Греческая площадь, 3/4,<br/>7 этаж, офис 766.</p></div> '
  })

  marker.addListener('click', function() {
    infoWindow.open(map, marker);
  })

}